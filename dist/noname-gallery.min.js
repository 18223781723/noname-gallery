!function(){function t(t){if(0===t.list.length)throw new Error("options.list can not be empty array");this.options=Object.assign({},this.defaults,t)}t.prototype.defaults={list:[],index:0,fadeInOut:!0,useTransform:!0,verticalZoom:!0,openKeyboard:!1,zoomToScreenCenter:!1,duration:300,minScale:1.5},t.prototype.init=function(){this.setProperties(),this.setWindowSize(),this.setPreviewList(),this.setWrap(),this.render(),this.getElement(),this.bindEventListener(),this.open()},t.prototype.setProperties=function(){this.container=null,this.bg=null,this.counter=null,this.wrap=null,this.imgList=null,this.bgOpacity=1,this.windowWidth=0,this.windowHeight=0,this.index=this.options.index,this.wrapWidth=0,this.wrapX=0,this.previewList=[],this.currentImg={x:0,y:0,width:0,height:0,scale:1,opacity:1,status:""},this.pointers=[],this.point1={x:0,y:0},this.point2={x:0,y:0},this.diff={x:0,y:0},this.distance={x:0,y:0},this.lastDistance={x:0,y:0},this.lastPoint1={x:0,y:0},this.lastPoint2={x:0,y:0},this.lastMove={x:0,y:0},this.lastCenter={x:0,y:0},this.tapCount=0,this.dragDirection="",this.dragTarget="",this.status="",this.isPointerdown=!1,this.isAnimating=!0,this.isWrapAnimating=!1,this.tapTimeout=null,this.pointerdownTime=null,this.pointermoveTime=null,this.pinchTime=null,this.inertiaRafId=null,this.wrapRafId=null},t.prototype.setWindowSize=function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight},t.prototype.setPreviewList=function(){for(const t of this.options.list){const i=t.getBoundingClientRect(),e=this.getImgSize(t.naturalWidth,t.naturalHeight,this.windowWidth,this.windowHeight),s=Math.max(this.decimal(t.naturalWidth/e.width,5),this.options.minScale);this.previewList.push({x:this.decimal((this.windowWidth-e.width)/2,2),y:this.decimal((this.windowHeight-e.height)/2,2),width:this.decimal(e.width,2),height:this.decimal(e.height,2),maxWidth:this.decimal(e.width*s,2),maxHeight:this.decimal(e.height*s,2),maxScale:s,thumbnail:{x:this.decimal(i.left,2),y:this.decimal(i.top,2),width:this.decimal(i.width,2),height:this.decimal(i.height,2),scaleX:this.decimal(i.width/e.width,5),scaleY:this.decimal(i.height/e.height,5)}})}},t.prototype.setCurrentImg=function(t,i,e,s,n,h,r){this.currentImg={x:t,y:i,width:e,height:s,scale:n,opacity:h,status:r}},t.prototype.setWrap=function(){this.wrapWidth=this.previewList.length*this.windowWidth,this.wrapX=this.index*this.windowWidth*-1},t.prototype.render=function(){let t="opacity: 0;";this.options.useTransform&&(t+="transition: opacity "+this.options.duration+"ms ease-out;");let i='<div class="noname-gallery-container"><div class="noname-gallery-bg" style="'+t+'"></div><div class="noname-gallery-counter">'+(this.options.index+1)+" / "+this.options.list.length+'</div><ul class="noname-gallery-wrap" style="width: '+this.wrapWidth+"px; transform: translate3d("+this.wrapX+'px, 0, 0)">';for(let e=0,s=this.options.list.length;e<s;e++){const s=this.previewList[e];this.options.useTransform?(t="width: "+s.width+"px; height: "+s.height+"px;",this.index===e?t+="transform: translate3d("+s.thumbnail.x+"px, "+s.thumbnail.y+"px, 0) scale("+s.thumbnail.scaleX+", "+s.thumbnail.scaleY+");":t+="transform: translate3d("+s.x+"px, "+s.y+"px, 0) scale(1);",t+="transition: transform "+this.options.duration+"ms ease-out, opacity "+this.options.duration+"ms ease-out;"):this.index===e?(t="width: "+s.thumbnail.width+"px; height: "+s.thumbnail.height+"px;",t+="transform: translate3d("+s.thumbnail.x+"px, "+s.thumbnail.y+"px, 0);"):(t="width: "+s.width+"px; height: "+s.height+"px;",t+="transform: translate3d("+s.x+"px, "+s.y+"px, 0);"),this.index===e&&this.options.fadeInOut&&(t+="opacity: 0;"),t+="cursor: zoom-in;",i+='<li><img class="noname-gallery-img" src="'+this.options.list[e].src+'" alt="" style="'+t+'"></li>'}i+="</ul></div>",document.body.insertAdjacentHTML("beforeend",i)},t.prototype.getElement=function(){this.container=document.querySelector(".noname-gallery-container"),this.bg=document.querySelector(".noname-gallery-bg"),this.counter=document.querySelector(".noname-gallery-counter"),this.wrap=document.querySelector(".noname-gallery-wrap"),this.imgList=document.querySelectorAll(".noname-gallery-img");for(let t=0,i=this.imgList.length;t<i;t++)this.previewList[t].element=this.imgList[t]},t.prototype.open=function(){const t=this.previewList[this.index];if(this.options.useTransform)window.getComputedStyle(t.element).opacity,this.bg.style.opacity="1",this.options.fadeInOut&&(t.element.style.opacity="1"),t.element.style.transform="translate3d("+t.x+"px,"+t.y+"px, 0) scale(1)";else{const i={bg:{opacity:{from:0,to:1}},img:{width:{from:t.thumbnail.width,to:t.width},height:{from:t.thumbnail.height,to:t.height},x:{from:t.thumbnail.x,to:t.x},y:{from:t.thumbnail.y,to:t.y},index:this.index}};this.options.fadeInOut&&(i.img.opacity={from:0,to:1}),this.raf(i)}this.setCurrentImg(t.x,t.y,t.width,t.height,1,1,"")},t.prototype.close=function(){this.isAnimating=!0,this.status="close";const t=this.previewList[this.index];if(this.options.useTransform)this.options.fadeInOut&&(t.element.style.opacity="0"),t.element.style.transition="transform "+this.options.duration+"ms ease-out, opacity "+this.options.duration+"ms ease-out",t.element.style.transform="translate3d("+t.thumbnail.x+"px, "+t.thumbnail.y+"px, 0) scale("+t.thumbnail.scaleX+", "+t.thumbnail.scaleY+")",this.bg.style.transition="opacity "+this.options.duration+"ms ease-out",this.bg.style.opacity="0";else{const i={bg:{opacity:{from:this.bgOpacity,to:0}},img:{width:{from:this.currentImg.width,to:t.thumbnail.width},height:{from:this.currentImg.height,to:t.thumbnail.height},x:{from:this.currentImg.x,to:t.thumbnail.x},y:{from:this.currentImg.y,to:t.thumbnail.y},index:this.index}};this.options.fadeInOut&&(i.img.opacity={from:1,to:0}),this.raf(i)}},t.prototype.bindEventListener=function(){this.handlePointerdown=this.handlePointerdown.bind(this),this.handlePointermove=this.handlePointermove.bind(this),this.handlePointerup=this.handlePointerup.bind(this),this.handlePointercancel=this.handlePointercancel.bind(this),this.handleResize=this.handleResize.bind(this),this.handleTransitionEnd=this.handleTransitionEnd.bind(this),this.container.addEventListener("pointerdown",this.handlePointerdown),this.container.addEventListener("pointermove",this.handlePointermove),this.container.addEventListener("pointerup",this.handlePointerup),this.container.addEventListener("pointercancel",this.handlePointercancel),this.container.addEventListener("transitionend",this.handleTransitionEnd),window.addEventListener("resize",this.handleResize),window.addEventListener("orientationchange",this.handleResize),this.options.openKeyboard&&(this.handleKeydown=this.handleKeydown.bind(this),window.addEventListener("keydown",this.handleKeydown))},t.prototype.unbindEventListener=function(){this.container.removeEventListener("pointerdown",this.handlePointerdown),this.container.removeEventListener("pointermove",this.handlePointermove),this.container.removeEventListener("pointerup",this.handlePointerup),this.container.removeEventListener("pointercancel",this.handlePointercancel),this.container.removeEventListener("transitionend",this.handleTransitionEnd),window.removeEventListener("resize",this.handleResize),window.removeEventListener("orientationchange",this.handleResize),this.options.openKeyboard&&window.removeEventListener("keydown",this.handleKeydown)},t.prototype.handlePointerdown=function(t){"mouse"===t.pointerType&&0!==t.button||this.isAnimating||(this.pointers.push(t),this.point1={x:this.pointers[0].clientX,y:this.pointers[0].clientY},1===this.pointers.length?(this.container.setPointerCapture(t.pointerId),this.isPointerdown=!0,this.distance={x:0,y:0},this.lastDistance={x:0,y:0},this.pointerdownTime=Date.now(),this.pinchTime=null,this.lastMove={x:this.pointers[0].clientX,y:this.pointers[0].clientY},!1===this.isWrapAnimating&&this.tapCount++,this.tapCount>1&&(Math.abs(this.point1.x-this.lastPoint1.x)>30||Math.abs(this.point1.y-this.lastPoint1.y)>30)&&(this.tapCount=1),clearTimeout(this.tapTimeout),window.cancelAnimationFrame(this.inertiaRafId),window.cancelAnimationFrame(this.wrapRafId)):2===this.pointers.length&&(this.tapCount=0,this.point2={x:this.pointers[1].clientX,y:this.pointers[1].clientY},this.lastCenter=this.getCenter(this.point1,this.point2),this.lastDistance={x:this.distance.x,y:this.distance.y},this.lastPoint2={x:this.pointers[1].clientX,y:this.pointers[1].clientY},""===this.dragTarget&&(this.dragTarget="img")),this.lastPoint1={x:this.pointers[0].clientX,y:this.pointers[0].clientY})},t.prototype.handlePointermove=function(t){if(!this.isPointerdown)return;this.handlePointers(t,"update");const i={x:this.pointers[0].clientX,y:this.pointers[0].clientY};if(1===this.pointers.length)this.diff={x:i.x-this.lastMove.x,y:i.y-this.lastMove.y},this.distance={x:i.x-this.point1.x+this.lastDistance.x,y:i.y-this.point1.y+this.lastDistance.y},this.lastMove={x:i.x,y:i.y},this.pointermoveTime=Date.now(),(Math.abs(this.distance.x)>10||Math.abs(this.distance.y)>10)&&(this.tapCount=0,""===this.dragDirection&&""===this.dragTarget&&(this.getDragDirection(),this.getDragTarget())),"wrap"===this.dragTarget?this.handleWrapPointermove():"img"===this.dragTarget&&this.handleImgPointermove();else if(2===this.pointers.length){const t={x:this.pointers[1].clientX,y:this.pointers[1].clientY};"img"===this.dragTarget&&"verticalToClose"!==this.currentImg.status&&this.handlePinch(i,t),this.lastPoint1={x:i.x,y:i.y},this.lastPoint2={x:t.x,y:t.y}}t.preventDefault()},t.prototype.handlePointerup=function(t){this.isPointerdown&&(this.handlePointers(t,"delete"),0===this.pointers.length?(this.isPointerdown=!1,0===this.tapCount?"wrap"===this.dragTarget?this.handleWrapPointerup():"img"===this.dragTarget&&this.handleImgPointerup():1===this.tapCount?"mouse"===t.pointerType?t.clientX>=this.currentImg.x&&t.clientX<=this.currentImg.x+this.currentImg.width&&t.clientY>=this.currentImg.y&&t.clientY<=this.currentImg.y+this.currentImg.height?this.handleZoom({x:t.clientX,y:t.clientY}):this.close():Date.now()-this.pointerdownTime<500?this.tapTimeout=setTimeout((()=>{this.close()}),250):this.tapCount=0:this.tapCount>1&&this.handleZoom({x:t.clientX,y:t.clientY})):1===this.pointers.length&&(this.point1={x:this.pointers[0].clientX,y:this.pointers[0].clientY},this.lastMove={x:this.pointers[0].clientX,y:this.pointers[0].clientY}))},t.prototype.handlePointercancel=function(t){this.tapCount=0,this.isPointerdown=!1,this.pointers.length=0,this.isWrapAnimating&&this.handleWrapPointerup()},t.prototype.handlePointers=function(t,i){for(let e=0;e<this.pointers.length;e++)this.pointers[e].pointerId===t.pointerId&&("update"===i?this.pointers[e]=t:"delete"===i&&this.pointers.splice(e,1))},t.prototype.handleResize=function(){this.setWindowSize(),this.previewList.length=0,this.setPreviewList();const t=this.previewList[this.index];this.setCurrentImg(t.x,t.y,t.width,t.height,1,1,""),this.setWrap(),this.wrap.style.width=this.wrapWidth+"px",this.wrap.style.transform="translate3d("+this.wrapX+"px, 0, 0)";for(let t=0,i=this.imgList.length;t<i;t++){const i=this.previewList[t];i.element=this.imgList[t],i.element.style.width=i.width+"px",i.element.style.height=i.height+"px",this.options.useTransform?(i.element.style.transition="none",i.element.style.transform="translate3d("+i.x+"px, "+i.y+"px, 0) scale(1)"):i.element.style.transform="translate3d("+i.x+"px, "+i.y+"px, 0)",i.element.style.cursor="zoom-in"}this.options.useTransform&&(this.bg.style.transition="none"),this.bgOpacity=1,this.bg.style.opacity=this.bgOpacity,this.tapCount=0},t.prototype.handleKeydown=function(t){if(this.isAnimating||this.isWrapAnimating)return;const i=this.index;"Escape"===t.key?this.close():["ArrowLeft","ArrowUp"].includes(t.key)&&i>0?this.index--:["ArrowRight","ArrowDown"].includes(t.key)&&i<this.previewList.length-1&&this.index++,window.cancelAnimationFrame(this.inertiaRafId),this.handleWrapSwipe(),this.handleLastImg(i)},t.prototype.handleZoom=function(t){this.isAnimating=!0,this.tapCount=0;const i=this.previewList[this.index];if(this.currentImg.scale>1){if(this.options.useTransform)i.element.style.transition="transform "+this.options.duration+"ms ease-out, opacity "+this.options.duration+"ms ease-out",i.element.style.transform="translate3d("+i.x+"px,"+i.y+"px, 0) scale(1)";else{const t={img:{width:{from:this.currentImg.width,to:i.width},height:{from:this.currentImg.height,to:i.height},x:{from:this.currentImg.x,to:i.x},y:{from:this.currentImg.y,to:i.y},index:this.index}};this.raf(t)}i.element.style.cursor="zoom-in",this.setCurrentImg(i.x,i.y,i.width,i.height,1,1,"")}else{const e=this.windowWidth/2,s=this.windowHeight/2,n=this.decimal((t.x-i.x)*i.maxScale,2),h=this.decimal((t.y-i.y)*i.maxScale,2);let r,o;if(i.maxWidth>this.windowWidth?(r=this.options.zoomToScreenCenter?e-n:t.x-n,r>0?r=0:r<this.windowWidth-i.maxWidth&&(r=this.windowWidth-i.maxWidth)):r=(this.windowWidth-i.maxWidth)/2,r=this.decimal(r,2),i.maxHeight>this.windowHeight?(o=this.options.zoomToScreenCenter?s-h:t.y-h,o>0?o=0:o<this.windowHeight-i.maxHeight&&(o=this.windowHeight-i.maxHeight)):o=(this.windowHeight-i.maxHeight)/2,o=this.decimal(o,2),this.options.useTransform)i.element.style.transition="transform "+this.options.duration+"ms ease-out, opacity "+this.options.duration+"ms ease-out",i.element.style.transform="translate3d("+r+"px,"+o+"px, 0) scale("+i.maxScale+")";else{const t={img:{width:{from:i.width,to:i.maxWidth},height:{from:i.height,to:i.maxHeight},x:{from:i.x,to:r},y:{from:i.y,to:o},index:this.index}};this.raf(t)}i.element.style.cursor="zoom-out",this.setCurrentImg(r,o,i.maxWidth,i.maxHeight,i.maxScale,1,"")}},t.prototype.handlePinch=function(t,i){const e=.7;this.pinchTime=Date.now();let s=this.getDistance(t,i)/this.getDistance(this.lastPoint1,this.lastPoint2),n=this.decimal(this.currentImg.scale*s,5);const h=this.previewList[this.index];n>h.maxScale?(s=h.maxScale/this.currentImg.scale,this.currentImg.scale=h.maxScale,this.currentImg.width=h.maxWidth,this.currentImg.height=h.maxHeight):n<e?(s=e/this.currentImg.scale,this.currentImg.scale=e,this.currentImg.width=this.decimal(h.width*e,2),this.currentImg.height=this.decimal(h.height*e,2)):(this.currentImg.scale=n,this.currentImg.width=this.decimal(this.currentImg.width*s,2),this.currentImg.height=this.decimal(this.currentImg.height*s,2)),this.currentImg.status=this.currentImg.scale<1?"shrink":"";const r=this.getCenter(t,i);this.currentImg.x-=(s-1)*(r.x-this.currentImg.x)-r.x+this.lastCenter.x,this.currentImg.y-=(s-1)*(r.y-this.currentImg.y)-r.y+this.lastCenter.y,this.lastCenter={x:r.x,y:r.y},this.handleBoundary(),this.options.useTransform?(h.element.style.transition="none",h.element.style.transform="translate3d("+this.currentImg.x+"px, "+this.currentImg.y+"px, 0) scale("+this.currentImg.scale+")"):(h.element.style.width=this.currentImg.width+"px",h.element.style.height=this.currentImg.height+"px",h.element.style.transform="translate3d("+this.currentImg.x+"px, "+this.currentImg.y+"px, 0)")},t.prototype.handleBoundary=function(){this.currentImg.width>this.windowWidth?this.currentImg.x>0?this.currentImg.x=0:this.currentImg.x<this.windowWidth-this.currentImg.width&&(this.currentImg.x=this.windowWidth-this.currentImg.width):this.currentImg.x=(this.windowWidth-this.currentImg.width)/2,this.currentImg.height>this.windowHeight?this.currentImg.y>0?this.currentImg.y=0:this.currentImg.y<this.windowHeight-this.currentImg.height&&(this.currentImg.y=this.windowHeight-this.currentImg.height):this.currentImg.y=(this.windowHeight-this.currentImg.height)/2},t.prototype.getImgSize=function(t,i,e,s){let n,h;return t/i>=e/s?t>e?(n=e,h=e/t*i):(n=t,h=i):i>s?(n=s/i*t,h=s):(n=t,h=i),{width:n,height:h}},t.prototype.getDragDirection=function(){Math.abs(this.distance.x)>Math.abs(this.distance.y)?this.dragDirection="h":this.dragDirection="v"},t.prototype.getDragTarget=function(){let t=!1,i=!1;this.currentImg.width>this.windowWidth?(this.diff.x>0&&0===this.currentImg.x||this.diff.x<0&&this.currentImg.x===this.windowWidth-this.currentImg.width)&&(t=!0):this.currentImg.width>=this.previewList[this.index].width&&(i=!0),"h"===this.dragDirection&&(t||i)?this.dragTarget="wrap":this.dragTarget="img"},t.prototype.getDistance=function(t,i){const e=t.x-i.x,s=t.y-i.y;return Math.hypot(e,s)},t.prototype.handleWrapPointermove=function(){if(this.wrapX>0||this.wrapX<(this.previewList.length-1)*this.windowWidth*-1)this.wrapX+=.3*this.diff.x;else{this.wrapX+=this.diff.x;const t=(this.index-1)*this.windowWidth*-1,i=(this.index+1)*this.windowWidth*-1;this.wrapX>t?this.wrapX=t:this.wrapX<i&&(this.wrapX=i)}this.wrap.style.transform="translate3d("+this.wrapX+"px, 0, 0)"},t.prototype.handleImgPointermove=function(){const t=this.previewList[this.index];this.currentImg.width>this.windowWidth||this.currentImg.height>this.windowHeight?(this.currentImg.x+=this.diff.x,this.currentImg.y+=this.diff.y,this.handleBoundary(),this.currentImg.status="inertia",this.options.useTransform?(t.element.style.transition="none",t.element.style.transform="translate3d("+this.currentImg.x+"px, "+this.currentImg.y+"px, 0) scale("+this.currentImg.scale+")"):t.element.style.transform="translate3d("+this.currentImg.x+"px, "+this.currentImg.y+"px, 0)"):"v"===this.dragDirection&&this.currentImg.width<=t.width&&this.currentImg.height<=t.height&&(this.currentImg.status="verticalToClose",this.bgOpacity=this.decimal(1-Math.abs(this.distance.y)/(this.windowHeight/1.2),5),this.bgOpacity<0&&(this.bgOpacity=0),this.options.verticalZoom?(this.currentImg.scale=this.bgOpacity,this.currentImg.width=this.decimal(t.width*this.currentImg.scale,2),this.currentImg.height=this.decimal(t.height*this.currentImg.scale,2),this.currentImg.x=t.x+this.distance.x+(t.width-this.currentImg.width)/2,this.currentImg.y=t.y+this.distance.y+(t.height-this.currentImg.height)/2):(this.currentImg.x=t.x,this.currentImg.y=t.y+this.distance.y,this.currentImg.scale=1),this.bg.style.opacity=this.bgOpacity,this.options.useTransform?(this.bg.style.transition="none",t.element.style.transition="none",t.element.style.transform="translate3d("+this.currentImg.x+"px, "+this.currentImg.y+"px , 0) scale("+this.currentImg.scale+")"):(t.element.style.width=this.currentImg.width+"px",t.element.style.height=this.currentImg.height+"px",t.element.style.transform="translate3d("+this.currentImg.x+"px, "+this.currentImg.y+"px , 0)"))},t.prototype.handleWrapPointerup=function(){const t=Math.round(.1*this.windowWidth),i=this.index;Math.abs(this.distance.x)>t&&(this.distance.x>0&&i>0?this.index--:this.distance.x<0&&i<this.previewList.length-1&&this.index++),this.handleWrapSwipe(),this.handleLastImg(i)},t.prototype.handleImgPointerup=function(){const t=Math.round(.1*this.windowHeight),i=this.previewList[this.index],e=Date.now();if("inertia"===this.currentImg.status&&e-this.pointermoveTime<200&&e-this.pinchTime>1e3)this.handleInertia();else if("verticalToClose"===this.currentImg.status&&Math.abs(this.distance.y)>=t)this.close();else if("shrink"===this.currentImg.status||"verticalToClose"==this.currentImg.status&&Math.abs(this.distance.y)<t){if(this.isAnimating=!0,this.options.useTransform)this.bg.style.opacity="1",i.element.style.transition="transform "+this.options.duration+"ms ease-out, opacity "+this.options.duration+"ms ease-out",i.element.style.transform="translate3d("+i.x+"px, "+i.y+"px, 0) scale(1)";else{const t={bg:{opacity:{from:this.bgOpacity,to:1}},img:{width:{from:this.currentImg.width,to:i.width},height:{from:this.currentImg.height,to:i.height},x:{from:this.currentImg.x,to:i.x},y:{from:this.currentImg.y,to:i.y},index:this.index}};this.raf(t)}this.bgOpacity=1,this.setCurrentImg(i.x,i.y,i.width,i.height,1,1,"")}!1===this.isAnimating&&(this.dragTarget="",this.dragDirection="")},t.prototype.handleInertia=function(){const t=this.previewList[this.index],i={x:this.diff.x,y:this.diff.y},e=this;this.inertiaRafId=window.requestAnimationFrame((function s(n){i.x*=.95,i.y*=.95,e.currentImg.x=e.decimal(e.currentImg.x+i.x,2),e.currentImg.y=e.decimal(e.currentImg.y+i.y,2),e.handleBoundary(),e.options.useTransform?t.element.style.transform="translate3d("+e.currentImg.x+"px, "+e.currentImg.y+"px, 0) scale("+e.currentImg.scale+")":t.element.style.transform="translate3d("+e.currentImg.x+"px, "+e.currentImg.y+"px, 0)",(Math.abs(i.x)>1||Math.abs(i.y)>1)&&(e.inertiaRafId=window.requestAnimationFrame(s))}))},t.prototype.handleWrapSwipe=function(){this.isWrapAnimating=!0;const t={wrap:{x:{from:this.wrapX,to:this.windowWidth*this.index*-1}}};this.wrapRaf(t),this.counter.innerHTML=this.index+1+" / "+this.previewList.length},t.prototype.handleLastImg=function(t){if(this.index!==t){if(this.currentImg.scale>1){const i=this.previewList[t];if(this.options.useTransform)i.element.style.transition="transform "+this.options.duration+"ms ease-out, opacity "+this.options.duration+"ms ease-out",i.element.style.transform="translate3d("+i.x+"px, "+i.y+"px, 0) scale(1)";else{const e={img:{width:{from:this.currentImg.width,to:i.width},height:{from:this.currentImg.height,to:i.height},x:{from:this.currentImg.x,to:i.x},y:{from:this.currentImg.y,to:i.y},index:t}};this.raf(e)}i.element.style.cursor="zoom-in"}const i=this.previewList[this.index];this.setCurrentImg(i.x,i.y,i.width,i.height,1,1,"")}},t.prototype.handleTransitionEnd=function(t){"IMG"===t.target.tagName&&(t.target===this.previewList[this.index].element&&(this.isAnimating=!1,this.dragTarget="",this.dragDirection=""),"close"===this.status&&(this.unbindEventListener(),this.container.remove()))},t.prototype.decimal=function(t,i){const e=Math.pow(10,i);return Math.round(t*e)/e},t.prototype.getCenter=function(t,i){return{x:(t.x+i.x)/2,y:(t.y+i.y)/2}},t.prototype.easeOut=function(t,i,e,s){const n=e/s;return-(i-t)*n*(n-2)+t},t.prototype.raf=function(t){const i=this;let e,s=0;const n=this.options.duration,h=this.previewList[t.img.index];window.requestAnimationFrame((function r(o){void 0===e&&(e=o);let a=o-e;if(a>n&&(a=n,s++),t.bg){const e=i.decimal(i.easeOut(t.bg.opacity.from,t.bg.opacity.to,a,n),5);i.bg.style.opacity=e}if(t.img.opacity){const e=i.decimal(i.easeOut(t.img.opacity.from,t.img.opacity.to,a,n),5);h.element.style.opacity=e}const d=i.decimal(i.easeOut(t.img.width.from,t.img.width.to,a,n),2),l=i.decimal(i.easeOut(t.img.height.from,t.img.height.to,a,n),2),m=i.decimal(i.easeOut(t.img.x.from,t.img.x.to,a,n),2),c=i.decimal(i.easeOut(t.img.y.from,t.img.y.to,a,n),2);h.element.style.width=d+"px",h.element.style.height=l+"px",h.element.style.transform="translate3d("+m+"px, "+c+"px, 0)",s<=1?window.requestAnimationFrame(r):(t.img.index===i.index&&(i.isAnimating=!1,i.dragTarget="",i.dragDirection=""),"close"===i.status&&(i.unbindEventListener(),i.container.remove()))}))},t.prototype.wrapRaf=function(t){const i=this;let e,s=0;const n=this.options.duration;this.wrapRafId=window.requestAnimationFrame((function h(r){void 0===e&&(e=r);let o=r-e;o>n&&(o=n,s++),i.wrapX=i.decimal(i.easeOut(t.wrap.x.from,t.wrap.x.to,o,n),2),i.wrap.style.transform="translate3d("+i.wrapX+"px, 0, 0)",s<=1?i.wrapRafId=window.requestAnimationFrame(h):(i.isWrapAnimating=!1,i.dragTarget="",i.dragDirection="")}))},"function"==typeof define&&define.amd?define((function(){return t})):"object"==typeof module&&"object"==typeof exports?module.exports=t:window.NonameGallery=t}();